{% extends 'HeVinciCompetencyBundle:Objective:layout.html.twig' %}

{% set activeTab = 'groups' %}
{% set isFilteredByObjective = isFilteredByObjective is defined ? isFilteredByObjective : false %}

{% block title %}
    {{ parent() ~ ' - ' ~ 'groups'|trans({}, 'platform') }}
{% endblock %}

{% block breadcrumb %}
    {{
        macros.breadcrumbs(objectiveBreadcrumbs|merge([{
            name: 'groups'|trans({}, 'platform'),
            href: path('hevinci_objectives_groups')
        }]))
    }}
{% endblock %}

{% block tabContent %}
    {% if pager.getNbPages() > 1 %}
        {{ pagerfanta(pager, 'twitter_bootstrap_translated', { 'proximity': 1 }) }}
    {% endif %}

    <br>

    {% if pager.getNbResults() > 0 %}
        <table class="table table-condensed table-bordered group-objectives">
            <thead>
                <tr>
                    <th>{{ 'group'|trans({}, 'platform') }}</th>
                    <th>{{ 'framework_'|trans({}, 'competency') }}</th>
                    <th colspan="3">{{ 'actions'|trans({}, 'platform') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for group in pager.currentPageResults() %}
                    {% include 'HeVinciCompetencyBundle:Objective:groupObjectiveRow.html.twig' with group %}
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <div class="alert alert-info" role="alert">
            <i class="fa fa-info-circle"></i>
            {% if isFilteredByObjective %}
                {{ 'info.no_objective_groups'|trans({}, 'competency') }}
            {% else %}
                {{ 'info.no_group_objectives'|trans({}, 'competency') }}
            {% endif %}
        </div>
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/hevincicompetency/js/objectiveGroups.js') }}"></script>
{% endblock %}